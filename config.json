{
  "proyecto": "CarnavalLogistics",
  "descripcion": "Plataforma de Gesti√≥n de Log√≠stica de Carnavales",
  "version": "1.0.0",
  "estado": "OPERATIVO",
  "fecha_completacion": "2026-02-02",
  
  "arquitectura": {
    "tipo": "Microservicios",
    "patron": "API Gateway (BFF)",
    "comunicacion": "HTTP REST",
    "aislamiento": "Docker Containers",
    "servicios_totales": 3
  },
  
  "servicios": [
    {
      "nombre": "API Gateway",
      "puerto": 8000,
      "framework": "FastAPI",
      "responsabilidades": [
        "Enrutamiento de peticiones",
        "CORS",
        "Servir frontend est√°tico",
        "Proxy a servicios backend"
      ],
      "url_health": "http://localhost:8000/health",
      "url_swagger": "http://localhost:8000/docs"
    },
    {
      "nombre": "Aforo Service",
      "puerto": 8001,
      "framework": "FastAPI",
      "responsabilidades": [
        "Gesti√≥n de recintos/plazas",
        "Registro de movimientos",
        "C√°lculo de ocupaci√≥n",
        "Estados de capacidad"
      ],
      "modelos": ["Recinto", "Movimiento"],
      "base_datos": "SQLite (aforo.db)",
      "url_health": "http://localhost:8001/health"
    },
    {
      "nombre": "Permisos Service",
      "puerto": 8002,
      "framework": "FastAPI",
      "responsabilidades": [
        "Registro de comerciantes",
        "Gesti√≥n de puestos",
        "Sistema de permisos",
        "Validaci√≥n de vigencia"
      ],
      "modelos": ["Comerciante", "Puesto", "Permiso"],
      "base_datos": "SQLite (permisos.db)",
      "url_health": "http://localhost:8002/health"
    }
  ],
  
  "stack_tecnologico": {
    "backend": {
      "lenguaje": "Python 3.11",
      "framework": "FastAPI 0.104.1",
      "servidor": "Uvicorn 0.24.0",
      "orm": "SQLAlchemy 2.0.23",
      "validacion": "Pydantic 2.12.5",
      "base_datos": "SQLite"
    },
    "frontend": {
      "markup": "HTML5",
      "estilos": "CSS3 (Responsive, Gradients, Animations)",
      "logica": "Vanilla JavaScript (Fetch API)",
      "sin_dependencias_externas": true
    },
    "devops": {
      "containerizacion": "Docker",
      "orquestacion": "Docker Compose",
      "redes": "Docker Network (carnival-network)",
      "volumenes": ["aforo_db", "permisos_db"]
    }
  },
  
  "endpoints": {
    "aforo": [
      {
        "metodo": "POST",
        "ruta": "/aforo/recintos",
        "descripcion": "Crear nuevo recinto"
      },
      {
        "metodo": "GET",
        "ruta": "/aforo/recintos/{id}",
        "descripcion": "Obtener recinto por ID"
      },
      {
        "metodo": "POST",
        "ruta": "/aforo/recintos/{id}/movimientos",
        "descripcion": "Registrar entrada/salida"
      },
      {
        "metodo": "GET",
        "ruta": "/aforo/recintos/{id}/ocupacion",
        "descripcion": "Ver ocupaci√≥n actual"
      }
    ],
    "permisos": [
      {
        "metodo": "POST",
        "ruta": "/permisos/comerciantes",
        "descripcion": "Registrar comerciante"
      },
      {
        "metodo": "GET",
        "ruta": "/permisos/comerciantes",
        "descripcion": "Listar comerciantes"
      },
      {
        "metodo": "POST",
        "ruta": "/permisos/puestos",
        "descripcion": "Crear puesto"
      },
      {
        "metodo": "GET",
        "ruta": "/permisos/puestos",
        "descripcion": "Listar puestos"
      },
      {
        "metodo": "POST",
        "ruta": "/permisos/permisos",
        "descripcion": "Solicitar permiso"
      },
      {
        "metodo": "GET",
        "ruta": "/permisos/permisos",
        "descripcion": "Listar permisos"
      },
      {
        "metodo": "PATCH",
        "ruta": "/permisos/permisos/{id}",
        "descripcion": "Actualizar estado de permiso"
      }
    ]
  },
  
  "caracter√≠sticas": {
    "independencia": "Cada servicio tiene su propia BD y no comparte c√≥digo",
    "escalabilidad": "F√°cil agregar nuevas instancias o servicios",
    "disponibilidad": "Health checks en todos los servicios",
    "comunicacion": "REST HTTP entre servicios",
    "frontend": "Dashboard moderno, responsivo e intuitivo",
    "documentacion": "API Swagger autom√°tica",
    "persistencia": "SQLite con vol√∫menes Docker"
  },
  
  "estructura_directorios": {
    "api-gateway": {
      "main.py": "Aplicaci√≥n FastAPI principal",
      "config.py": "Variables de configuraci√≥n",
      "requirements.txt": "Dependencias Python",
      "Dockerfile": "Imagen Docker"
    },
    "aforo-service": {
      "main.py": "Rutas y l√≥gica de aforo",
      "database.py": "Configuraci√≥n SQLAlchemy",
      "models.py": "Modelos ORM",
      "schemas.py": "Esquemas Pydantic",
      "requirements.txt": "Dependencias",
      "Dockerfile": "Imagen Docker",
      "aforo.db": "Base de datos SQLite"
    },
    "permisos-service": {
      "main.py": "Rutas y l√≥gica de permisos",
      "database.py": "Configuraci√≥n SQLAlchemy",
      "models.py": "Modelos ORM",
      "schemas.py": "Esquemas Pydantic",
      "requirements.txt": "Dependencias",
      "Dockerfile": "Imagen Docker",
      "permisos.db": "Base de datos SQLite"
    },
    "frontend": {
      "index.html": "P√°gina principal del dashboard",
      "styles.css": "Estilos CSS responsivos",
      "app.js": "L√≥gica JavaScript"
    }
  },
  
  "estados_ocupacion": {
    "NORMAL": {
      "rango": "< 85%",
      "color": "üü¢ Verde",
      "indicador": "Capacidad normal"
    },
    "CERCA_DEL_LIMITE": {
      "rango": "85% - 99%",
      "color": "üü° Amarillo",
      "indicador": "Pr√≥ximo al l√≠mite"
    },
    "AFORO_COMPLETO": {
      "rango": ">= 100%",
      "color": "üî¥ Rojo",
      "indicador": "Capacidad superada"
    }
  },
  
  "estados_permisos": [
    {
      "estado": "SOLICITADO",
      "descripcion": "Permiso en espera de aprobaci√≥n",
      "icono": "üìã"
    },
    {
      "estado": "APROBADO",
      "descripcion": "Permiso activo",
      "icono": "‚úÖ"
    },
    {
      "estado": "RECHAZADO",
      "descripcion": "Permiso rechazado",
      "icono": "‚ùå"
    },
    {
      "estado": "VENCIDO",
      "descripcion": "Permiso expirado",
      "icono": "‚è∞"
    }
  ],
  
  "instrucciones_uso": {
    "prerequisitos": [
      "Docker Desktop instalado",
      "Docker Compose",
      "Navegador web moderno"
    ],
    "pasos": [
      "Posicionarse en la carpeta del proyecto",
      "Ejecutar: docker-compose up -d",
      "Esperar 5-10 segundos",
      "Abrir: http://localhost:8000",
      "¬°Dashboard listo para usar!"
    ],
    "parar_servicios": "docker-compose down",
    "ver_logs": "docker-compose logs -f"
  },
  
  "verificaciones": {
    "servicios_corriendo": {
      "metodo": "docker ps",
      "esperado": "3 contenedores en estado 'Up'"
    },
    "health_checks": [
      {
        "servicio": "API Gateway",
        "url": "http://localhost:8000/health",
        "esperado": "{\"status\":\"ok\"}"
      },
      {
        "servicio": "Aforo Service",
        "url": "http://localhost:8001/health",
        "esperado": "{\"status\":\"ok\"}"
      },
      {
        "servicio": "Permisos Service",
        "url": "http://localhost:8002/health",
        "esperado": "{\"status\":\"ok\"}"
      }
    ]
  },
  
  "metricas": {
    "servicios_principales": 3,
    "modelos_datos": 5,
    "endpoints": 17,
    "contenedores": 3,
    "volumenes": 2,
    "lineas_codigo_backend": "~500+",
    "lineas_codigo_frontend": "~850+",
    "lineas_documentacion": "~300+"
  },
  
  "archivos_importantes": [
    "README.md - Documentaci√≥n completa",
    "COMPLETADO.md - Resumen del proyecto",
    "INSTRUCCIONES.md - Gu√≠a de uso",
    "docker-compose.yml - Orquestaci√≥n",
    "run.ps1 - Script de inicio para Windows"
  ],
  
  "urls_acceso": {
    "dashboard": "http://localhost:8000",
    "swagger": "http://localhost:8000/docs",
    "health_gateway": "http://localhost:8000/health",
    "health_aforo": "http://localhost:8001/health",
    "health_permisos": "http://localhost:8002/health"
  },
  
  "notas_tecnicas": [
    "Los servicios NO comparten base de datos",
    "Los servicios NO comparten c√≥digo",
    "La comunicaci√≥n es SIEMPRE v√≠a HTTP",
    "Los datos persisten entre reinicios",
    "CORS est√° habilitado para desarrollo",
    "Swagger est√° auto-generado",
    "Frontend es completamente independiente"
  ],
  
  "proximos_pasos_opcionales": [
    "Implementar autenticaci√≥n JWT",
    "Migrar a PostgreSQL para producci√≥n",
    "Agregar WebSockets para real-time",
    "Implementar Redis para caching",
    "Crear dashboard de analytics",
    "Escribir tests automatizados",
    "Configurar CI/CD con GitHub Actions",
    "Deployer en Kubernetes"
  ]
}
